(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{47943:function(){},55024:function(){},83637:function(e,t,n){Promise.resolve().then(n.bind(n,87290)),Promise.resolve().then(n.bind(n,90541)),Promise.resolve().then(n.bind(n,15167)),Promise.resolve().then(n.bind(n,63776))},87290:function(e,t,n){"use strict";n.r(t),n.d(t,{CurrentC:function(){return CurrentC}});var r=n(57437),l=n(44838),i=n(14703);function CurrentC(){let{currentC:e,error:t,mutate:n,isLoading:s,isValidating:c}=(0,l.vP)();return(0,r.jsx)("section",{children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)("h1",{children:"Текущий состав Совета"}),s||c?"Загрузка...":(0,r.jsx)("button",{onClick:()=>n(),children:"Обновить"}),(0,r.jsxs)("table",{cellSpacing:"16px",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Аккаунт"}),(0,r.jsx)("th",{children:"Вес голоса"})]})}),(0,r.jsx)("tbody",{children:null==e?void 0:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,i.r)(e.id)}),(0,r.jsx)("td",{children:e.count})]},e.id))})]})]})})}},90541:function(e,t,n){"use strict";n.r(t),n.d(t,{DelegateTree:function(){return DelegateTree}});var r=n(57437),l=n(14703),i=n(45266);let Tree=e=>{var t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{children:(0,r.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[(0,l.r)(e.id)," ",(0,i.z)(e)]})},e.id),!!(null===(t=e.children)||void 0===t?void 0:t.length)&&(0,r.jsx)("ul",{children:e.children.map(e=>Tree(e))},"".concat(e.id,"_children"))]})};var s=n(44838);function DelegateTree(){let{tree:e,isLoading:t,isValidating:n,mutate:l}=(0,s.Aj)();return(0,r.jsx)("section",{children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)("h1",{children:"Проверка делегаций для Совета:"}),t||n?"Загрузка...":(0,r.jsx)("button",{onClick:()=>l(),children:"Обновить"}),(0,r.jsx)("ul",{children:null==e?void 0:e.map(e=>Tree(e))},"tree")]})})}},14703:function(e,t,n){"use strict";n.d(t,{r:function(){return Link}});var r=n(57437);let Link=e=>e?(0,r.jsx)("a",{href:"https://stellar.expert/explorer/public/account/".concat(e),target:"_blank",children:e.replace(e.substring(4,e.length-4),"...")}):null},15167:function(e,t,n){"use strict";n.r(t),n.d(t,{Members:function(){return Members}});var r=n(57437),l=n(44838),i=n(14703),s=n(2265);function Members(){let{members:e,size:t,setSize:n,data:c,isLoading:d,isValidating:u,mutate:a}=(0,l.Y5)();return(0,s.useEffect)(()=>{var e,r;c&&(null==c?void 0:null===(r=c[t-1])||void 0===r?void 0:null===(e=r.records)||void 0===e?void 0:e.length)>0&&n(t+1)},[c,t]),(0,r.jsx)("section",{children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)("h1",{children:"Открывшие линии доверия к MTLAP"}),d||u?"Загрузка...":(0,r.jsx)("button",{onClick:()=>a(),children:"Обновить"}),(0,r.jsxs)("table",{cellSpacing:"16px",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Аккаунт"}),(0,r.jsx)("th",{children:"Количество токенов MTLAP"}),(0,r.jsx)("th",{children:"Делегация в Собрании"}),(0,r.jsx)("th",{children:"Делегация в Совете"})]})}),(0,r.jsx)("tbody",{children:null==e?void 0:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,i.r)(e.id)}),(0,r.jsx)("td",{children:e.count}),(0,r.jsx)("td",{children:(0,i.r)(e.delegateA)}),(0,r.jsx)("td",{children:(0,i.r)(e.delegateC)})]},e.id))})]})]})})}},63776:function(e,t,n){"use strict";n.r(t),n.d(t,{NewC:function(){return NewC}});var r=n(57437),l=n(14703),i=n(44838);function NewC(){let{newC:e,isLoading:t,isValidating:n,mutate:s}=(0,i.Wt)();return(0,r.jsx)("section",{children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)("h1",{children:"Ожидаемый состав Совета"}),t||n?"Загрузка...":(0,r.jsx)("button",{onClick:()=>s(),children:"Обновить"}),(0,r.jsxs)("table",{cellSpacing:"16px",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Аккаунт"}),(0,r.jsx)("th",{children:"Количество токенов MTLAP (с учетом делегаций)"}),(0,r.jsx)("th",{children:"Вес голоса"})]})}),(0,r.jsx)("tbody",{children:null==e?void 0:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,l.r)(e.id)}),(0,r.jsx)("td",{children:e.count}),(0,r.jsx)("td",{children:e.weight})]},e.id))})]})]})})}},44838:function(e,t,n){"use strict";n.d(t,{vP:function(){return useGetCurrentC},Y5:function(){return useGetMembers},Wt:function(){return useGetNewC},Aj:function(){return useGetTree}});var r=n(69108),l=n(30713),i=n(17405);let s={mainAccount:"GCNVDZIHGX473FEI7IXCUAEXUJ4BGCKEMHF36VYP5EMS7PX2QBLAMTLA",mtlapToken:"MTLAP"};n(7006);var c=n(80437),d=n.n(c),u=n(2265),a=n(92166),o=n(45266);let h=new r.Server("https://horizon.stellar.org"),x=new r.Asset(s.mtlapToken,s.mainAccount),useGetCurrentC=()=>{let e=(0,l.ZP)("currentC",()=>h.loadAccount(s.mainAccount)),{data:t,error:n,mutate:r,isLoading:i,isValidating:c}=e;return{currentC:null==t?void 0:t.signers.filter(e=>e.key!==s.mainAccount).map(e=>({id:e.key,count:e.weight})).sort((e,t)=>t.count-e.count),error:n,mutate:r,isLoading:i,isValidating:c}},useGetMembers=()=>{let e=(0,i.ZP)((e,t)=>{var n;return!t||(null===(n=t.records)||void 0===n?void 0:n.length)?0===e?"members":t:null},e=>"members"===e?h.accounts().forAsset(x).call():e.next(),{revalidateOnFocus:!1,revalidateFirstPage:!1,parallel:!1}),t=[];return d()(e.data,e=>e.records).forEach(e=>{var n;t.push({id:e.account_id,count:Number((null===(n=e.balances.find(e=>"credit_alphanum12"===e.asset_type&&e.asset_code===x.getCode()&&e.asset_issuer===x.getIssuer()))||void 0===n?void 0:n.balance)||0),delegateA:atob(e.data_attr.mtla_a_delegate||e.data_attr.mtla_delegate||""),delegateC:atob(e.data_attr.mtla_c_delegate||e.data_attr.mtla_delegate||"")})}),{size:e.size,setSize:e.setSize,data:e.data,isLoading:e.isLoading,isValidating:e.isValidating,mutate:e.mutate,members:t}},useGetTree=()=>{let{members:e,size:t,setSize:n,data:r,isLoading:l,isValidating:i,mutate:s}=useGetMembers();(0,u.useEffect)(()=>{var e,l;r&&(null==r?void 0:null===(l=r[t-1])||void 0===l?void 0:null===(e=l.records)||void 0===e?void 0:e.length)>0&&n(t+1)},[r,t]);let c=(0,a.arrayToTree)(null==e?void 0:e.filter(e=>e.count>0),{parentId:"delegateC",dataField:null});return{tree:c,isLoading:l,isValidating:i,mutate:s}},useGetNewC=()=>{let{tree:e,isLoading:t,isValidating:n,mutate:r}=useGetTree(),l=e.map(e=>({...e,count:(0,o.z)(e),weight:Math.floor(Math.log10(Math.max((0,o.z)(e),2)-1)+1)})).splice(0,20).sort((e,t)=>t.count-e.count);return{newC:l,isLoading:t,isValidating:n,mutate:r}}},45266:function(e,t,n){"use strict";n.d(t,{z:function(){return sumCount}});let sumCount=e=>{var t,n;return e.count+ +((null===(t=e.children)||void 0===t?void 0:t.length)?null===(n=e.children)||void 0===n?void 0:n.map(sumCount).reduce((e,t)=>e+t,0):0)}}},function(e){e.O(0,[638,574,971,864,744],function(){return e(e.s=83637)}),_N_E=e.O()}]);